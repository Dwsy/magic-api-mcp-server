---
title: "配置多数据源"
date: "2022-01-29T20:51:19.000Z"
permalink: "/pages/base/datasource/"
---
# 在线配置多数据源




# 后台配置多数据源

@Bean
public MagicDynamicDataSource magicDynamicDataSource(){
    MagicDynamicDataSource dynamicDataSource = new MagicDynamicDataSource();
    dynamicDataSource.setDefault(ds1); // 设置默认数据源
    dynamicDataSource.add("slave",ds2);
    return dynamicDataSource;
}



# 运行时Java动态配置数据源

在运行时只可以通过注入MagicDynamicDataSource对象来修改数据源信息

@Autowired
private MagicDynamicDataSource magicDynamicDataSource;
// 此时可以通过调用magicDynamicDataSource的相关方法实现数据源的动态修改。



# 切换数据源

使用代码db.数据源key来切换

db.db1.select('sql')
db['db1'].select('sql')
var dbKey = 'db2'
db[dbKey].select('sql')
