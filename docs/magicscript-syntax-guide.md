# Magic-Script `?:` è¯­æ³•è¯¦è§£

## ğŸ¯ `?:` è¯­æ³•çš„ä½œç”¨

### **1. åœ¨å‡½æ•°ç­¾åä¸­çš„ä½œç”¨ (æ­£ç¡®ç”¨æ³•)**

`?:` è¯­æ³•**ä»…åœ¨å‡½æ•°ç­¾åä¸­æœ‰æ•ˆ**ï¼Œç”¨äºæ ‡è®°å‡½æ•°å‚æ•°ä¸º**å¯é€‰å‚æ•°**ã€‚

#### **è¯­æ³•æ ¼å¼**
```javascript
// åŸºç¡€è¯­æ³•
functionName(paramName?: Type) -> ReturnType

// å®é™…ç¤ºä¾‹
asInt(defaultValue?: int) -> int
page(sql: String, limit?: long, offset?: long) -> Object
```

#### **å«ä¹‰è¯´æ˜**
- **ä½ç½®**: ä»…å‡ºç°åœ¨å‡½æ•°å‚æ•°å®šä¹‰ä¸­
- **ä½œç”¨**: æ ‡è®°è¯¥å‚æ•°ä¸ºå¯é€‰å‚æ•°ï¼Œè°ƒç”¨æ—¶å¯ä»¥çœç•¥
- **ç¤ºä¾‹**:
  - `asInt(value?: int)` - `value` å‚æ•°å¯ä»¥çœç•¥
  - `page(sql, limit?, offset?)` - `limit` å’Œ `offset` éƒ½å¯ä»¥çœç•¥

### **2. åœ¨ä»£ç é€»è¾‘ä¸­çš„é”™è¯¯ç”¨æ³• (å·²ä¿®å¤)**

âŒ **é”™è¯¯ç”¨æ³•** (JavaScripté£æ ¼ï¼ŒMagic-Scriptä¸æ”¯æŒ):
```javascript
// é”™è¯¯: åœ¨ä»£ç ä¸­è¿™æ ·ä½¿ç”¨æ˜¯é”™è¯¯çš„
var page = params.page ?: 1;
var size = params.size ?: 10;
```

âœ… **æ­£ç¡®ç”¨æ³•** (Magic-Scriptä¸‰å…ƒè¿ç®—ç¬¦):
```javascript
// æ­£ç¡®: ä½¿ç”¨æ ‡å‡†çš„æ¡ä»¶è¡¨è¾¾å¼
var page = params.page ? params.page : 1;
var size = params.size ? params.size : 10;
```

## ğŸ“‹ è¯­æ³•è§„åˆ™å¯¹æ¯”

| åœºæ™¯ | è¯­æ³• | å«ä¹‰ | çŠ¶æ€ |
|------|------|------|------|
| **å‡½æ•°ç­¾å** | `param?: Type` | å‚æ•°å¯é€‰ | âœ… æ­£ç¡® |
| **ä»£ç é€»è¾‘** | `condition ?: value` | ç©ºå€¼åˆå¹¶ | âŒ é”™è¯¯ |
| **ä»£ç é€»è¾‘** | `condition ? value1 : value2` | ä¸‰å…ƒè¿ç®— | âœ… æ­£ç¡® |

## ğŸ” å®é™…ä¿®å¤æ¡ˆä¾‹

### **ä¿®å¤å‰ (é”™è¯¯)**
```javascript
// code_generation.py - é”™è¯¯ç”¨æ³•
var page = params.page ?: 1;
var size = params.size ?: 10;

// kb_examples.py - é”™è¯¯ç”¨æ³•
params.offset = (params.page ?: 1 - 1) * (params.size ?: 10);
```

### **ä¿®å¤å (æ­£ç¡®)**
```javascript
// code_generation.py - æ­£ç¡®ç”¨æ³•
var page = params.page ? params.page : 1;
var size = params.size ? params.size : 10;

// kb_examples.py - æ­£ç¡®ç”¨æ³•
params.offset = (params.page ? params.page : 1 - 1) * (params.size ? params.size : 10);
```

## âš ï¸ é‡è¦æé†’

1. **å‡½æ•°ç­¾åä¸­**: `?:` è¡¨ç¤º"è¯¥å‚æ•°æ˜¯å¯é€‰çš„" âœ…
2. **ä»£ç é€»è¾‘ä¸­**: `?:` è¯­æ³•ä¸å­˜åœ¨ï¼Œåº”è¯¥ä½¿ç”¨ `? :` ä¸‰å…ƒè¿ç®—ç¬¦ âœ…
3. **åŒºåˆ†æ¸…æ¥š**: ä¸è¦å°†å‡½æ•°ç­¾åè¯­æ³•ç”¨äºå®é™…ä»£ç é€»è¾‘

## ğŸ¯ æœ€ä½³å®è·µ

- âœ… **å‡½æ•°ç­¾å**: `asInt(value?: int)` - è¡¨ç¤º `value` å‚æ•°å¯é€‰
- âœ… **ä»£ç é€»è¾‘**: `params.page ? params.page : 1` - ä¸‰å…ƒæ¡ä»¶è¡¨è¾¾å¼
- âœ… **å‚æ•°æ£€æŸ¥**: `if (!param) { /* å¤„ç†ç©ºå€¼ */ }` - æ˜¾å¼ç©ºå€¼æ£€æŸ¥

---

**æ€»ç»“**: `?:` è¯­æ³•æ˜¯å‡½æ•°å‚æ•°å¯é€‰æ€§çš„æ ‡è®°ç¬¦å·ï¼Œä»…åœ¨å‡½æ•°ç­¾åä¸­ä½¿ç”¨ã€‚åœ¨ä»£ç é€»è¾‘ä¸­è¯·ä½¿ç”¨æ ‡å‡†çš„ `condition ? value1 : value2` ä¸‰å…ƒè¿ç®—ç¬¦è¯­æ³•ã€‚
